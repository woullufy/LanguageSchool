<head>
    <title>Groups for this Course</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

    <h1>ğŸ‘¥ Groups for {{ title }}</h1>

    <form action="/select-course/{{ student_id }}" method="get">
        <button type="submit" class="submit-button">â† Back to Courses</button>
    </form>
    {% with messages = get_flashed_messages()%}
    {% if messages%}
    {% for message in messages%}
    <p>{{message}}</p>
    {%endfor%}
    {%endif%}
    {%endwith%}

    <table class="styled-table">
        <thead>
            <tr>
                <th>Group ID</th>
                <th>Age Category</th>
                <th>Max Participants</th>
                <th>Current Members</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for group in groups %}
            <tr>
                <td>{{ group.student_group_id }}</td>
                <td>{{ group.age_category }}</td>
                <td>{{ group.max_participants }}</td>
                <td>{{ group.amount_of_participants }}</td>
                <td>
                    {% if group.student_group_id in joined_ids %}
                    <button type="button" disabled class="done-button">âœ… Done</button>
                    {% else %}
                    <form method="POST" action="/join-group">
                        <input type="hidden" name="student_group_id" value="{{ group.student_group_id }}">
                        <input type="hidden" name="course_id" value="{{ group.course_id }}">
                        <input type="hidden" name="student_id" value="{{ student_id }}">
                        <input type="hidden" name="age_category" value="{{group.age_category}}">

                        <button type="submit" class="submit-button">â• Join</button>
                    </form>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</body>
<head>
    <title>Groups for this Course</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

    <h1>üë• Groups for {{ title }}</h1>

    <form method="get"
        action="{% if db_mode == 'nosql' %}{{ url_for('student_management_mongo.select_course', student_id=student_id) }}{% else %}{{ url_for('student_management.select_course', student_id=student_id) }}{% endif %}">
        <button type="submit" class="submit-button">‚Üê Back to Courses</button>
    </form>

    <table class="styled-table">
        <thead>
            <tr>
                <th>Group ID</th>
                <th>Age Category</th>
                <th>Max Participants</th>
                <th>Current Members</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for group in groups %}
            <tr>
                <td>{{ group.student_group_id }}</td>
                <td>{{ group.age_category }}</td>
                <td>{{ group.max_participants }}</td>
                <td>
                    {% if group.amount_of_participants is defined %}
                    {{ group.amount_of_participants }}
                    {% elif group.students is defined %}
                    {{ group.students | length }}
                    {% else %}
                    N/A
                    {% endif %}
                </td>
                <td>
                    {% if group.student_group_id in joined_ids %}
                    <button type="button" disabled class="done-button">‚úÖ Done</button>
                    {% else %}
                    <form method="POST"
                        action="{% if db_mode == 'nosql' %}{{ url_for('student_management_mongo.join_group', student_id=student_id) }}{% else %}{{ url_for('student_management.join_group', student_id=student_id) }}{% endif %}">
                        <input type="hidden" name="student_group_id" value="{{ group.student_group_id }}">
                        <input type="hidden" name="course_id" value="{{ group.course_id }}">
                        <input type="hidden" name="student_id" value="{{ student_id }}">
                        <input type="hidden" name="age_category" value="{{group.age_category}}">

                        <button type="submit" class="submit-button">‚ûï Join</button>
                    </form>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</body>